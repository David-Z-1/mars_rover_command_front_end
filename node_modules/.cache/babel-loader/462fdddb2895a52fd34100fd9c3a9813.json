{"ast":null,"code":"var _jsxFileName = \"/Users/david/Desktop/mars_rover_command_front_end-5/src/components/Rover_Map.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar x_previous;\nvar y_previous;\nvar rover_x;\nvar rover_y;\nvar alien_x;\nvar alien_y;\nvar radar_x;\nvar radar_y;\nvar color;\nvar canvas_initial_offset; // ensure @ (0,0) image of rover can fully displayed\n\ncanvas_initial_offset = 5; //x_previous=canvas_initial_offset;\n//y_previous=canvas_initial_offset;\n// var id_rover_array = new Array<number>();\n// var id_alien_array = new Array<number>();\n\n/* ------------- force useEffect to render (useful because useRef will prevent the change being noticed) ------------- */\n\nexport function useForceUpdate() {\n  _s();\n\n  const [, setTick] = useState(0);\n  const update = useCallback(() => {\n    setTick(tick => tick + 1);\n  }, []);\n  return update;\n}\n/* -------------------------------------------------  define canvas  ------------------------------------------------- */\n\n_s(useForceUpdate, \"C/PHpCb03UdT1Zvs8guPjcg6YZY=\");\n\n/* ----------------------------------------------  main function  start  ---------------------------------------------- */\nconst Map = _ref => {\n  _s2();\n\n  let {\n    width,\n    height\n  } = _ref;\n  const forceUpdate = useForceUpdate();\n  const [roverlocatex, setRoverlocateX] = useState([0]);\n  const [roverlocatey, setRoverlocateY] = useState([0]);\n  const [alienlocatex, setAlienlocateX] = useState([0]);\n  const [alienlocatey, setAlienlocateY] = useState([0]);\n  const [aliencolor, setAliencolor] = useState([]);\n  const [radarlocatex, setRadarlocateX] = useState([0]);\n  const [radarlocatey, setRadarlocateY] = useState([0]);\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      /* ------------------------------   obtain data from database - rover location   ------------------------------ */\n      const FetchRoverData = async () => {\n        try {\n          const res = await axios.get('https://us-central1-rover-back-end.cloudfunctions.net/rover_1');\n          setRoverlocateX(res.data[0]);\n          setRoverlocateY(res.data[1]); // if(id_rover_array.indexOf((res.data)[0]['id']) == -1){\n          //     console.log(\"rover id update\")\n          //     id_rover_array.push((res.data)[0]['id'])\n          //     forceUpdate();\n          // }\n          // else {\n          //     console.log(\"rover id exist\")\n          // }\n        } catch (error) {\n          console.log(\"error @ FetchRoverData @ map\", error);\n        }\n      };\n      /* ------------------------------   obtain data from database - alien location   ------------------------------ */\n\n\n      const FetchAlienData = async () => {\n        try {\n          const res1 = await axios.get('https://us-central1-rover-back-end.cloudfunctions.net/new_alien_app');\n          setAlienlocateX(res1.data['x-axis']);\n          setAlienlocateY(res1.data['y-axis']);\n          setAliencolor(res1.data['color']);\n          console.log(\"check_alien_data\", res1.data['color']); // if(id_alien_array.indexOf((res1.data)[0]['id']) == -1){\n          //     forceUpdate();\n          //     id_alien_array.push((res1.data)[0]['id'])\n          // }\n          // else {\n          //     console.log(\"alien id exist\")\n          // }\n        } catch (error) {\n          console.log(\"error @ FetchAlienData @ map\", error);\n        }\n      };\n\n      const FetchRadarData = async () => {\n        try {\n          const res1 = await axios.get('https://us-central1-rover-back-end.cloudfunctions.net/radar');\n          setRadarlocateX(res1.data['x-axis']);\n          setRadarlocateY(res1.data['y-axis']);\n          console.log(\"check_map_rover_data\", res1.data['x-axis'], res1.data['y-axis']);\n        } catch (error) {\n          console.log(\"error @ FetchRoverData @ map\", error);\n        }\n      };\n      /* ----------------------   obtain coordinates where image is displayed - rover location   ---------------------- */\n\n\n      var roverlocate_x = roverlocatex.toString().split(\"\");\n      var roverlocate_y = roverlocatey.toString().split(\"\");\n\n      if (rover_x !== 5 + parseInt(roverlocate_x.join(\"\")) || rover_y !== 5 + parseInt(roverlocate_y.join(\"\"))) {\n        // if (5+parseInt(roverlocate_x.join(\"\"))-x_previous>=20 || 5+parseInt(roverlocate_y.join(\"\"))-y_previous>=20 ) {\n        x_previous = rover_x;\n        y_previous = rover_y;\n      } //}\n\n\n      rover_x = canvas_initial_offset + Math.abs(parseInt(roverlocate_x.join(\"\")) * 15); //+5: make sure full image/circle is displayed\n\n      rover_y = canvas_initial_offset + Math.abs(parseInt(roverlocate_y.join(\"\")) * 15);\n      /* ----------------------   obtain coordinates where image is displayed - alien location   ---------------------- */\n\n      var alienlocate_x = alienlocatex.toString().split(\"\");\n      var alienlocate_y = alienlocatey.toString().split(\"\");\n      alien_x = canvas_initial_offset + parseInt(alienlocate_x.join(\"\"));\n      alien_y = canvas_initial_offset + parseInt(alienlocate_y.join(\"\"));\n      var alien_color = aliencolor.toString().split(\"\");\n      color = alien_color.join(\"\");\n      /* -------------------------   radar   ------------------------*/\n\n      var radarlocate_x = radarlocatex.toString().split(\"\");\n      var radarlocate_y = radarlocatey.toString().split(\"\");\n      radar_x = canvas_initial_offset + parseInt(radarlocate_x.join(\"\"));\n      radar_y = canvas_initial_offset + parseInt(radarlocate_y.join(\"\"));\n      console.log(\"radar location to be drawn: \", radar_x, radar_y);\n      /* -------------------------   clear previous image & draw new image - rover location   -------------------------*/\n\n      if (canvasRef.current) {\n        var canvas = canvasRef.current;\n        var map_drawing = canvas.getContext('2d');\n        var tmp_1 = {\n          //use to resize image\n          width: 0,\n          height: 0\n        }; //forceUpdate();\n\n        var img = new Image();\n        img.src = 'image.png';\n        tmp_1.width = Math.floor(img.width * 0.04);\n        tmp_1.height = Math.floor(img.height * 0.04);\n\n        img.onload = function () {\n          // if(rover_x!==5 && rover_y!==5){\n          // if (rover_x-x_previous>=20 || rover_y-y_previous>=20 || rover_y==5 && rover_x==5 ) {\n          map_drawing.clearRect(x_previous, y_previous, tmp_1.width, tmp_1.height);\n          console.log('clear: x_pre-', x_previous, 'y_pre-', y_previous); // for debug\n\n          map_drawing.drawImage(img, rover_x, rover_y, tmp_1.width, tmp_1.height);\n          console.log('draw: x-', rover_x, 'y-', rover_y); // for debug\n          //}\n        };\n        /* ------------------------   radar   -------------------------*/\n\n\n        var tmp_2 = {\n          width: 0,\n          height: 0\n        };\n        var img_radar = new Image();\n        img_radar.src = 'alien_base.png';\n        tmp_2.width = Math.floor(img_radar.width * 0.05);\n        tmp_2.height = Math.floor(img_radar.height * 0.05);\n\n        img_radar.onload = function () {\n          if (radar_x !== canvas_initial_offset || radar_y !== canvas_initial_offset) {\n            map_drawing.drawImage(img_radar, radar_x, radar_y, tmp_2.width, tmp_2.height);\n            console.log('radar_draw: x-', radar_x, 'y-', radar_y); // for debug\n          }\n        };\n        /* ------------------------   clear previous image & draw new image - alien location   ------------------------ */\n\n\n        if (map_drawing && (alien_x !== canvas_initial_offset || alien_y !== canvas_initial_offset)) {\n          map_drawing.beginPath(); // console.log('color', color);  // for debug\n\n          if (color === 'BUILDING') {\n            map_drawing.rect(alien_x, alien_y, 5, 5); //rectangular OR bulding drawing\n\n            map_drawing.fillStyle = 'white';\n          } else {\n            map_drawing.arc(alien_x, alien_y, 5, 0, 2 * Math.PI); //circle drawing\n\n            map_drawing.fillStyle = color;\n          }\n\n          map_drawing.fill();\n          map_drawing.stroke();\n        } else {\n          console.log('error loading contents');\n        }\n      }\n\n      FetchRadarData();\n      FetchRoverData();\n      FetchAlienData();\n    }, 1000);\n    return () => clearInterval(intervalId); //This is important\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      height: height,\n      width: width\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 9\n  }, this);\n};\n/* -------------------------------------------------  canvas size  ------------------------------------------------- */\n\n\n_s2(Map, \"8qPltvmYLH3cqv2kr1IF+Kkr4mY=\", false, function () {\n  return [useForceUpdate];\n});\n\n_c = Map;\nMap.defaultProps = {\n  width: 400,\n  height: 500\n};\nexport default Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","axios","x_previous","y_previous","rover_x","rover_y","alien_x","alien_y","radar_x","radar_y","color","canvas_initial_offset","useForceUpdate","setTick","update","tick","Map","width","height","forceUpdate","roverlocatex","setRoverlocateX","roverlocatey","setRoverlocateY","alienlocatex","setAlienlocateX","alienlocatey","setAlienlocateY","aliencolor","setAliencolor","radarlocatex","setRadarlocateX","radarlocatey","setRadarlocateY","canvasRef","intervalId","setInterval","FetchRoverData","res","get","data","error","console","log","FetchAlienData","res1","FetchRadarData","roverlocate_x","toString","split","roverlocate_y","parseInt","join","Math","abs","alienlocate_x","alienlocate_y","alien_color","radarlocate_x","radarlocate_y","current","canvas","map_drawing","getContext","tmp_1","img","Image","src","floor","onload","clearRect","drawImage","tmp_2","img_radar","beginPath","rect","fillStyle","arc","PI","fill","stroke","clearInterval","defaultProps"],"sources":["/Users/david/Desktop/mars_rover_command_front_end-5/src/components/Rover_Map.tsx"],"sourcesContent":["import React,{useState,useEffect,useRef,useCallback} from 'react'\nimport axios from 'axios'\nvar x_previous: number;\nvar y_previous: number;\nvar rover_x: number;\nvar rover_y: number;\nvar alien_x: number;\nvar alien_y: number;\nvar radar_x: number;\nvar radar_y: number;\nvar color: string;\n\nvar canvas_initial_offset: number;     // ensure @ (0,0) image of rover can fully displayed\ncanvas_initial_offset=5;\n//x_previous=canvas_initial_offset;\n//y_previous=canvas_initial_offset;\n\n// var id_rover_array = new Array<number>();\n// var id_alien_array = new Array<number>();\n\n/* ------------- force useEffect to render (useful because useRef will prevent the change being noticed) ------------- */\nexport function useForceUpdate() {\n  const [, setTick] = useState(0);\n  const update = useCallback(() => {\n    setTick(tick => tick + 1);\n  }, [])\n  return update;\n}\n\n/* -------------------------------------------------  define canvas  ------------------------------------------------- */\ninterface CanvasProps {\n    width: number;\n    height: number;\n}\n\n/* ----------------------------------------------  main function  start  ---------------------------------------------- */\nconst Map = ({ width, height }: CanvasProps) => {\n\n    const forceUpdate = useForceUpdate();\n\n    const [roverlocatex, setRoverlocateX] = useState<number[]>([0]);\n    const [roverlocatey, setRoverlocateY] = useState<number[]>([0]);\n\n    const [alienlocatex, setAlienlocateX] = useState<number[]>([0]);\n    const [alienlocatey, setAlienlocateY] = useState<number[]>([0]);\n    const [aliencolor, setAliencolor] = useState<string[]>([]);\n\n    const [radarlocatex, setRadarlocateX] = useState<number[]>([0]);\n    const [radarlocatey, setRadarlocateY] = useState<number[]>([0]);\n\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n\n    useEffect(() => {\n\n        const intervalId = setInterval(() => {\n\n        /* ------------------------------   obtain data from database - rover location   ------------------------------ */\n        const FetchRoverData = async () => {\n            try {\n                const res = await axios.get('https://us-central1-rover-back-end.cloudfunctions.net/rover_1')\n                setRoverlocateX((res.data)[0])\n                setRoverlocateY((res.data)[1])\n                // if(id_rover_array.indexOf((res.data)[0]['id']) == -1){\n                //     console.log(\"rover id update\")\n                //     id_rover_array.push((res.data)[0]['id'])\n                //     forceUpdate();\n                // }\n                // else {\n                //     console.log(\"rover id exist\")\n                // }\n            } \n            catch (error) {\n                console.log(\"error @ FetchRoverData @ map\", error)\n            }\n        }\n\n        /* ------------------------------   obtain data from database - alien location   ------------------------------ */\n        const FetchAlienData = async () => {\n            try {\n                const res1 = await axios.get('https://us-central1-rover-back-end.cloudfunctions.net/new_alien_app')\n                setAlienlocateX((res1.data)['x-axis'])\n                setAlienlocateY((res1.data)['y-axis'])\n                setAliencolor((res1.data)['color'])\n                console.log(\"check_alien_data\", (res1.data)['color'])\n                // if(id_alien_array.indexOf((res1.data)[0]['id']) == -1){\n                //     forceUpdate();\n                //     id_alien_array.push((res1.data)[0]['id'])\n                // }\n                // else {\n                //     console.log(\"alien id exist\")\n                // }\n            }\n            catch (error) {\n                console.log(\"error @ FetchAlienData @ map\", error)\n            }\n        }\n\n        const FetchRadarData = async () => {\n            try {\n                const res1 = await axios.get('https://us-central1-rover-back-end.cloudfunctions.net/radar')\n                setRadarlocateX((res1.data)['x-axis'])\n                setRadarlocateY((res1.data)['y-axis'])\n                console.log(\"check_map_rover_data\", (res1.data)['x-axis'], (res1.data)['y-axis'])\n            }\n            catch (error) {\n                console.log(\"error @ FetchRoverData @ map\", error)\n            }\n        }\n\n        /* ----------------------   obtain coordinates where image is displayed - rover location   ---------------------- */\n        var roverlocate_x = roverlocatex.toString().split(\"\")\n        var roverlocate_y = roverlocatey.toString().split(\"\")\n        if (rover_x!==5+parseInt(roverlocate_x.join(\"\")) || rover_y!==5+parseInt(roverlocate_y.join(\"\")) ){\n           // if (5+parseInt(roverlocate_x.join(\"\"))-x_previous>=20 || 5+parseInt(roverlocate_y.join(\"\"))-y_previous>=20 ) {\n            x_previous=rover_x\n            y_previous=rover_y}\n        //}\n        rover_x = canvas_initial_offset+Math.abs(parseInt(roverlocate_x.join(\"\"))*15)    //+5: make sure full image/circle is displayed\n        rover_y = canvas_initial_offset+Math.abs(parseInt(roverlocate_y.join(\"\"))*15)\n\n        /* ----------------------   obtain coordinates where image is displayed - alien location   ---------------------- */\n        var alienlocate_x = alienlocatex.toString().split(\"\")\n        var alienlocate_y = alienlocatey.toString().split(\"\")\n        alien_x = canvas_initial_offset+parseInt(alienlocate_x.join(\"\"))\n        alien_y = canvas_initial_offset+parseInt(alienlocate_y.join(\"\"))\n        var alien_color = aliencolor.toString().split(\"\")\n        color = alien_color.join(\"\")\n\n        /* -------------------------   radar   ------------------------*/\n        var radarlocate_x = radarlocatex.toString().split(\"\")\n        var radarlocate_y = radarlocatey.toString().split(\"\")\n        radar_x = canvas_initial_offset+parseInt(radarlocate_x.join(\"\"))\n        radar_y = canvas_initial_offset+parseInt(radarlocate_y.join(\"\"))\n        console.log(\"radar location to be drawn: \", radar_x, radar_y)\n\n        /* -------------------------   clear previous image & draw new image - rover location   -------------------------*/\n        if (canvasRef.current) {\n            var canvas = canvasRef.current;\n            var map_drawing = canvas.getContext('2d');  \n            var tmp_1 = {     //use to resize image\n                width: 0,\n                height:0 }\n            //forceUpdate();\n            var img = new Image();\n            img.src = 'image.png';\n            tmp_1.width=Math.floor(img.width * 0.04)\n            tmp_1.height=Math.floor(img.height * 0.04)\n            img.onload = function() {\n                // if(rover_x!==5 && rover_y!==5){\n                // if (rover_x-x_previous>=20 || rover_y-y_previous>=20 || rover_y==5 && rover_x==5 ) {\n                    map_drawing!.clearRect(x_previous, y_previous, tmp_1.width, tmp_1.height);\n                    console.log('clear: x_pre-',x_previous, 'y_pre-', y_previous)  // for debug\n                    map_drawing!.drawImage(img, rover_x, rover_y, tmp_1.width,  tmp_1.height);\n                    console.log('draw: x-',rover_x, 'y-', rover_y);  // for debug\n                //}\n            };\n\n            /* ------------------------   radar   -------------------------*/\n            var tmp_2 = {width: 0, height:0 }\n            var img_radar = new Image();\n            img_radar.src = 'alien_base.png';\n            tmp_2.width=Math.floor(img_radar.width * 0.05)\n            tmp_2.height=Math.floor(img_radar.height * 0.05)\n            img_radar.onload = function() {\n                if (radar_x!==canvas_initial_offset || radar_y!==canvas_initial_offset ) {\n                    map_drawing!.drawImage(img_radar, radar_x, radar_y, tmp_2.width,  tmp_2.height);\n                    console.log('radar_draw: x-',radar_x, 'y-', radar_y);  // for debug\n                }\n            };\n           \n            /* ------------------------   clear previous image & draw new image - alien location   ------------------------ */\n            if(map_drawing && (alien_x!==canvas_initial_offset || alien_y!==canvas_initial_offset)){\n                map_drawing.beginPath();\n                // console.log('color', color);  // for debug\n                if (color==='BUILDING'){\n                    map_drawing.rect(alien_x, alien_y, 5, 5);     //rectangular OR bulding drawing\n                    map_drawing.fillStyle = 'white'\n                } else {\n                    map_drawing.arc(alien_x, alien_y, 5, 0, 2*Math.PI);     //circle drawing\n                    map_drawing.fillStyle = color\n                }\n                map_drawing.fill();\n                map_drawing.stroke();\n            }   else {console.log('error loading contents')}\n        }       \n        FetchRadarData()\n        FetchRoverData()\n        FetchAlienData()\n        }, 1000);\n        return () => clearInterval(intervalId); //This is important\n    } );\n\n    return (\n        <div>\n            <canvas ref={canvasRef} height={height} width={width} />\n        </div>\n    );\n};\n\n/* -------------------------------------------------  canvas size  ------------------------------------------------- */\nMap.defaultProps = {\n    width: 400,\n    height: 500,\n};\n\nexport default Map;"],"mappings":"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"},"metadata":{},"sourceType":"module"}